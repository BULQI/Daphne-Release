<local:ToolWinBase x:Class="DaphneGui.CellPopDynamics.CellPopDynToolWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DaphneGui"
        xmlns:plot="clr-namespace:DaphneGui.CellPopDynamics"
        xmlns:docking="http://schemas.actiprosoftware.com/winfx/xaml/docking"
        xmlns:uc="clr-namespace:DaphneUserControlLib;assembly=DaphneUserControlLib"
        xmlns:dyn="clr-namespace:DaphneGui.CellPopDynamics"
        xmlns:SciChart="http://schemas.abtsoftware.co.uk/scichart"
        Title="CellPopDynToolWindow" 
        >

    
            <!--DockPanel-->
            <DockPanel LastChildFill="True">

                <!-- DockSite -->
                <docking:DockSite x:Name="dockSite" 
                          CanDocumentWindowsRaft="True"
                          AreDocumentWindowsDestroyedOnClose="False"
                          UseHostedAutoHidePopups="False"
                          AutomationProperties.AutomationId="DaphneDockSite"
                          >

                    <!--Height="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DockPanel}}, Path=Height}"-->

                        <docking:SplitContainer x:Name="plotSplitContainer" >

                        <!-- Left-hand content container - Plotting options GUI -->
                        <docking:SplitContainer Orientation="Vertical">

                            <docking:ToolWindowContainer docking:DockSite.ControlSize="300,650" x:Name="plotToolWindowContainer" AutomationProperties.AutomationId="PlotLeftTWContainer">
                                <docking:ToolWindow Title="Plot Options" >
                                    <ScrollViewer VerticalScrollBarVisibility="Auto" >
                                        <StackPanel>
                                            <!--this window's datacontext is Protocol.Scenario-->
                                            <plot:CellPopDynOptions x:Name="plotOptions" Tag="Analysis"></plot:CellPopDynOptions>
                                        </StackPanel>
                                    </ScrollViewer>
                                </docking:ToolWindow>
                            </docking:ToolWindowContainer>

                            <!--command buttons-->
                            <docking:ToolWindowContainer docking:DockSite.ControlSize="300,150">
                                <docking:ToolWindow Title="Plot Actions" >
                                    <ScrollViewer VerticalScrollBarVisibility="Auto" >
                                        <WrapPanel Orientation="Horizontal">
                                            <Button x:Name="plotButton" Width="50" Height="24" Content="Plot" Click="plotButton_Click"></Button>
                                            <Button x:Name="plotExportButton" Width="50"  Height="24" Content="Export" Click="plotExportButton_Click"></Button>
                                            <ComboBox x:Name="TimeUnitsComboBox"
                                              SelectionChanged="TimeUnitsComboBox_SelectionChanged" SelectedIndex="0">
                                                <ComboBoxItem>Minutes</ComboBoxItem>
                                                <ComboBoxItem>Hours</ComboBoxItem>
                                                <ComboBoxItem>Days</ComboBoxItem>
                                                <ComboBoxItem>Weeks</ComboBoxItem>
                                            </ComboBox>
                                        </WrapPanel>
                                    </ScrollViewer>
                                </docking:ToolWindow>
                            </docking:ToolWindowContainer>

                        </docking:SplitContainer>

                        <!-- Right-hand content containers - Chart window and maybe a tool bar also-->
                        <!--docking:DockSite.ControlSize="500,800"-->

                        <docking:ToolWindowContainer docking:DockSite.ControlSize="500,800" AutomationProperties.AutomationId="PlotRightTWContainer" >
                            <docking:ToolWindow Title="Graph" >
                                <ScrollViewer VerticalScrollBarVisibility="Auto" >

                                    <!--Moved the graph code here because it was not resizing-->
                                    <!--<plot:CellPopDynamicsGraph x:Name="dynGraph"></plot:CellPopDynamicsGraph>-->
                                    <!--<Grid SciChart:ThemeManager.Theme="ExpressionLight">-->

                                    <!--FontSize="20" FontFamily="Lucida Sans" FontWeight="Bold"-->
                                    <!--FontSize="20" FontFamily="Segoe UI" FontWeight="Bold"-->

                                    <Grid SciChart:ThemeManager.Theme="BrightSpark">

                                        <ScrollViewer VerticalScrollBarVisibility="Auto" >
                                            <dyn:CellPopDynamicsChartSurface x:Name="mySciChart" Grid.Row="1" ChartTitle="Cell Population Dynamics" FontSize="20" FontFamily="Segoe UI" FontWeight="Bold">

                                                <dyn:CellPopDynamicsChartSurface.ToolTip>
                                                    <ToolTip>
                                                        <StackPanel Width="200" Orientation="Horizontal">
                                                            <TextBlock TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Top" Padding="5" Width="200">
                                                                To zoom in and out, please use the mouse wheel or you can select a rectangular area to zoom into.
                                                            </TextBlock>
                                                        </StackPanel>
                                                    </ToolTip>
                                                </dyn:CellPopDynamicsChartSurface.ToolTip>

                                                <dyn:CellPopDynamicsChartSurface.ContextMenu>
                                                    <ContextMenu >
                                                        <MenuItem Header="Zoom In"  Name="menuZoomIn"  Click="menuZoomIn_Click"></MenuItem>
                                                        <MenuItem Header="Zoom Out" Name="menuZoomOut" Click="menuZoomOut_Click"></MenuItem>
                                                    </ContextMenu>
                                                </dyn:CellPopDynamicsChartSurface.ContextMenu>

                                                <!--  Declare Axes  -->
                                                <SciChart:SciChartSurface.XAxis>
                                                    <SciChart:NumericAxis VisibleRange="0, 10000" AxisTitle="Time in minutes" DrawMinorGridLines="False" DrawMajorGridLines="False"/>
                                                </SciChart:SciChartSurface.XAxis>

                                                <SciChart:SciChartSurface.YAxis>
                                                    <SciChart:NumericAxis VisibleRange="0, 200" AxisAlignment="Left" AxisTitle="Number of cells" DrawMinorGridLines="False" DrawMajorGridLines="False"/>
                                                </SciChart:SciChartSurface.YAxis>

                                                <!--  Declare ChartModifiers  -->
                                                <SciChart:SciChartSurface.ChartModifier>
                                                    <SciChart:ModifierGroup>
                                                <SciChart:RubberBandXyZoomModifier x:Name="rubberBandZoomModifier" IsEnabled="True" IsXAxisOnly="False" ZoomExtentsY="False" IsAnimated="True"/>
                                                <SciChart:LegendModifier x:Name="legendModifier" ShowLegend="True" Orientation="Vertical"/>
                                                        <SciChart:SeriesSelectionModifier>
                                                            <SciChart:SeriesSelectionModifier.SelectedSeriesStyle>
                                                                <Style TargetType="SciChart:BaseRenderableSeries">
                                                                    <Setter Property="StrokeThickness" Value="3" />
                                                                </Style>
                                                            </SciChart:SeriesSelectionModifier.SelectedSeriesStyle>
                                                        </SciChart:SeriesSelectionModifier>
                                                        <SciChart:MouseWheelZoomModifier x:Name="mouseWheelZoomModifier"/>
                                                        <SciChart:ZoomExtentsModifier ExecuteOn="MouseDoubleClick"/>
                                                    </SciChart:ModifierGroup>
                                                </SciChart:SciChartSurface.ChartModifier>

                                            </dyn:CellPopDynamicsChartSurface>
                                        </ScrollViewer>
                                    </Grid>

                                </ScrollViewer>
                            </docking:ToolWindow>
                        </docking:ToolWindowContainer>

                    </docking:SplitContainer>
                </docking:DockSite>
            </DockPanel>

</local:ToolWinBase>
